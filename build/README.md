## Building the Project

The project employs MSBuild to automate the process of compiling, testing and packaging the
project artifacts.

You will need to have MSBuild in your Environment Path variable, this [walk through post](https://msdn.microsoft.com/en-us/library/dd393573.aspx) is a great place to start with MSBuild. 

The build itself is contained within the `build` folder.

The key elements within the build process are:

**Build.proj** -  Target file for MSBuild to load

**build.props** - Defines environment and build property values that drive outputs from the build

**build.targets** - Defines the operations performed within the build process


### Build Parameters

The build framework employs [Windows Environment Variables](http://ss64.com/nt/syntax-variables.html) to pass parameters to the build.

#### Versioning Parameters

##### PRERELEASE

Setting governs whether a [pre-release or stable](https://docs.nuget.org/create/versioning) NuGet package is produced by the build.

Defaults to *true*.

When **PRERELEASE** is set to *true* the build will use the following format for build versioning:

```
ReportVerionInfo:
  ProductVersion      : '0.0.0-r160525' - used for AssemblyInformationalVersion attribute
  FileVersion         : '0.0.0.0' - used for AssemblyFileVersion attribute
  Version             : '0.0.0' - used for AssemblyVersion attribute
  PackageVersion      : '0.0.0.0-r160525'
```

When **PRERELEASE** is set to *false* the build will use the following format for build versioning:

```
ReportVerionInfo:
  ProductVersion      : '0.0.0' - used for AssemblyInformationalVersion attribute
  FileVersion         : '0.0.0.0' - used for AssemblyFileVersion attribute
  Version             : '0.0.0' - used for AssemblyVersion attribute
  PackageVersion      : '0.0.0.0'
```


##### Build Numbering Parameters

The following settings are employed by the build framework and a held in corresponding environment variables.

* **MajorVersion**. Defaults to *1*
* **MinorVersion**. Defaults to *3*
* **PatchVersion**. Defaults to *0
* **Revision**.    Defaults to *%build.counter%*

For local developer builds these version parameters will all be zeros.

Note: The build framework aims to work with the [Semantic Versioning](http://semver.org/spec/v1.0.0.html)  (SemVer) v1.0.0 specification.


#### Developer and CI environment settings

The following settings are used by developers and the CI server to pass machine specific parameters to the build. 

* **TestWebsitePath**. Defaults to *C:\Websites\ssc\Website*
* **TestWebsiteUrl**. Defaults to *http://ssc/*

Additional Environment variables are used by the CI server to customise build behaviour where required. Their values and associated defaults are shown below:

* **Configuration**. Defaults to *Release*

* **NugetExe**. Set to *true* on CI server. Defaults to local **packages** folder when not defined

Using the `.\build.cmd` command line build the **Configuration** parameter will be set to *Debug* by default.


### Command Line Build

From the checkout directory just run `.\build`  to invoke an local build of the project.

The outputs from the automated build will be written to the `artifacts\Release` folder.

*   Build

    assemblies generated by the build process.

*   CodeAnalysis

    contains the fxcop static analysis results for the project.

*   Packages

    NuGet packages create for the project.

*   TestResults

    a `TestResults.xml` file containing the unit test results.



**Note:** currently the configuration files for the project organisation shown above are not held under source control. Exercise caution when making changes to these files under this issue can be resolved.

#### NuGet Feeds

The NuGet feeds being used by the build are defined in`src\build\nuget\nuget.config`


### Useful Links

*   [MSBuild](https://msdn.microsoft.com/en-us/library/dd393574.aspx)

    *   [MSBuild Conditions](https://msdn.microsoft.com/en-gb/library/7szfhaft.aspx)

*   [XUnit](https://xunit.github.io/)

    *   [XUnit MSBuild integration](https://xunit.github.io/docs/running-tests-in-msbuild.html)

    *   [dotCover Console Runner](https://www.jetbrains.com/help/dotcover/10.0/dotCover__Console_Runner_Commands.html#cover)

    *   [Run xUnit.net tests with dotCover coverage](http://www.wwwlicious.com/2015/09/25/teamcity-dotcover-xunit-at-last/)